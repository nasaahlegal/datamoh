import os
import json

# متغيرات البيئة الحساسة يجب ضبطها عبر لوحة إعدادات الخدمة (مثل Render)
TOKEN = os.environ.get("BOT_TOKEN")
DATABASE_URL = os.environ.get("DATABASE_URL")
ADMIN_TELEGRAM_ID = int(os.environ.get("ADMIN_TELEGRAM_ID")) if os.environ.get("ADMIN_TELEGRAM_ID") else None
ADMIN_USERNAME = os.environ.get("ADMIN_USERNAME", "mohamycom")
PAY_ACCOUNT = os.environ.get("PAY_ACCOUNT")  # لا تضع أي رقم افتراضي داخل الكود!

# تحميل الأسئلة والأجوبة من ملف JSON أو افتراضيًا
Q_DATA = {}
if os.path.exists("data/questions.json"):
    with open("data/questions.json", encoding="utf-8") as f:
        Q_DATA = json.load(f)
else:
    Q_DATA = {
        "الأسرة": [
            {"question": "ما هي إجراءات الطلاق في العراق؟", "answer": "إجراءات الطلاق في العراق تتضمن مراجعة المحكمة الشرعية وتقديم طلب الطلاق بحضور الطرفين..."},
            {"question": "كيف يتم إثبات النسب؟", "answer": "إثبات النسب يتم عبر المحكمة وفي بعض الحالات بواسطة الفحوصات الطبية..."},
            {"question": "ما هي حقوق النفقة للأبناء؟", "answer": "للأبناء حق النفقة على الأب حسب القانون العراقي حتى بلوغهم سن الرشد..."}
        ],
        "العقارات": [
            {"question": "كيف يتم نقل ملكية عقار؟", "answer": "نقل ملكية العقار يتم عن طريق دائرة التسجيل العقاري بعد استكمال كافة المستندات..."},
            {"question": "ما هي شروط بيع الأراضي الزراعية؟", "answer": "يجب الحصول على موافقة الجهات الزراعية المختصة وإتمام الإجراءات في الدوائر المختصة..."}
        ],
        "العمل": [
            {"question": "ما هي حقوق العامل عند الفصل؟", "answer": "للعامل الحق في التعويض إذا تم فصله تعسفياً ويحق له مراجعة محكمة العمل..."},
            {"question": "هل يحق للعامل إجازة سنوية؟", "answer": "نعم، للعامل الحق في إجازة سنوية مدفوعة الأجر حسب قانون العمل العراقي..."}
        ]
    }

FREE_QUESTIONS_LIMIT = 3
QUESTION_PRICE = 5000
SUBSCRIPTION_PRICE = 50000
SUBSCRIPTION_DAYS = 30

PAY_MSG = (
    "للاشتراك الشهري (أسئلة غير محدودة : 30 يوم)\n"
    f"المبلغ: {SUBSCRIPTION_PRICE:,} دينار\n"
    "يتم التحويل حالياً عبر تطبيق (كي) المدعوم من قبل مصرف الرافدين وسيتم تفعيل طرق أخرى قريباً.\n"
    "عند استعدادك للتحويل اضغط (قبول الاشتراك) أو اضغط (إلغاء) أو (القائمة الرئيسية)."
)
PAY_ACCOUNT_MSG = (
    f"يرجى التحويل إلى رقم الحساب: {PAY_ACCOUNT if PAY_ACCOUNT else '[لم يتم ضبط الحساب بعد]'}\n"
    "بعد التحويل اضغط زر (تم التحويل) وليس قبل ذلك."
)
SINGLE_PAY_MSG = (
    f"سعر الإجابة على كل سؤال: {QUESTION_PRICE:,} دينار.\n"
    f"يرجى التحويل إلى رقم الحساب: {PAY_ACCOUNT if PAY_ACCOUNT else '[لم يتم ضبط الحساب بعد]'}\n"
    "بعد التحويل اضغط زر (تم التحويل)\n"
    "قريبًا سيتم تفعيل الدفع عبر وسائل دفع اخرى لتسريع العملية."
)
SUPPORT_EMAIL = "mohamycom@proton.me"
SUPPORT_CHANNEL = "t.me/mohamycom_tips"
SUPPORT_USERNAME = ADMIN_USERNAME

ABOUT_MSG = (
    "⚠️ تنبيه : هذه المنصة تعمل من خلال ردود تلقائية دقيقة.\n\n"
    "مرحبًا بك في منصة الاستشارات الفورية الذكية من (محاميكم) ⚖️\n\n"
    "📲 تتيح لك هذه المنصة الحصول على استشارات قانونية فورية بدقة وسرعة، مع ضمان خصوصيتك الكاملة.\n\n"
    "💰 تكلفة كل استشارة هي 5,000 دينار عراقي فقط، وتُستخدم هذه المبالغ بالكامل لتطوير المنصة وتحسين خدماتها، دون أي هدف ربحي.\n"
    "📅 يمكنك أيضًا الاشتراك الشهري مقابل 50,000 دينار عراقي، لتتمكن من طرح عدد غير محدود من الأسئلة القانونية دون رسوم إضافية.\n\n"
    "🌐 لمزيد من التفاصيل أو للاطلاع على خدماتنا الأخرى، تفضل بزيارة موقعنا الرسمي:\n"
    "https://mohamyiq.com/\n\n"
    "📬 للدعم الفني أو الاستفسارات:\n"
    "- البريد الإلكتروني: mohamycom@proton.me\n"
    "- قناة تيليجرام للتواصل: t.me/mohamycom_tips\n\n"
    "🔻 إخلاء مسؤولية:\n"
    "جميع المعلومات المقدّمة عبر هذه المنصة تُعدّ استشارات قانونية عامة مبنية على ما تقدمه من بيانات، ولا تُغني عن مراجعة محامٍ مختص. لا يتحمل فريق محاميكم أو المنصة أي مسؤولية قانونية عن استخدام هذه المعلومات في أي دعوى أو إجراء رسمي."
)



WELCOME_MSG = (
    "👋 مرحبًا بك في المنصة القانونية الذكية، إحدى خدمات منصة محاميكم ⚖️\n\n"
    "هنا يمكنك الحصول على إجابات قانونية فورية ودقيقة لمساعدتك في فهم وضعك القانوني واتخاذ قراراتك بثقة واطمئنان.\n\n"
    "🔒 نضمن لك أقصى درجات الخصوصية – لا نطلب أي معلومات شخصية، ويتم حذف جميع المحادثات تلقائيًا بعد انتهاء الجلسة.\n\n"
    "💼 ملاحظة: يمكنك الاشتراك شهريًا للاستفادة من عدد غير محدود من الإجابات الفورية دون الحاجة للدفع عن كل سؤال.\n\n"
    "👇 للبدء، اختر القسم المناسب من القائمة:"
)
