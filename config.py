import os
import json

TOKEN = os.environ.get("BOT_TOKEN")
DATABASE_URL = os.environ.get("DATABASE_URL")
ADMIN_TELEGRAM_ID = int(os.environ.get("ADMIN_TELEGRAM_ID")) if os.environ.get("ADMIN_TELEGRAM_ID") else None
ADMIN_USERNAME = os.environ.get("ADMIN_USERNAME", "mohamycom")
PAY_ACCOUNT = os.environ.get("PAY_ACCOUNT")

Q_DATA = {}
if os.path.exists("data/questions.json"):
    with open("data/questions.json", encoding="utf-8") as f:
        Q_DATA = json.load(f)
else:
    Q_DATA = {
        "الأسرة": {
            "الزواج": [{"question": "ما هي إجراءات الزواج في العراق؟", "answer": "إجابة عن سؤال الزواج..."}],
            "الطلاق": [{"question": "ما هي إجراءات الطلاق في العراق؟", "answer": "إجابة الطلاق..."}],
            "النفقة": [{"question": "ما هي حقوق النفقة للأبناء؟", "answer": "إجابة النفقة..."}],
            "الحضانة": [{"question": "ما هي شروط الحضانة في القانون العراقي؟", "answer": "إجابة الحضانة..."}],
            "النسب": [{"question": "كيف يتم إثبات النسب؟", "answer": "إجابة النسب..."}]
        },
        "مدني": {
            "عقارات": [{"question": "كيف يتم نقل ملكية عقار؟", "answer": "إجابة العقارات..."}],
            "عقود البيع والشراء": [{"question": "ما هي شروط عقود البيع والشراء الصحيحة؟", "answer": "إجابة العقود..."}]
        },
        "الوظيفة والعمل": {
            "قضايا الموظفين": [{"question": "هل يمكن تدوير كتب الشكر؟", "answer": "إجابة الموظفين..."}],
            "القطاع الخاص": [{"question": "ما هي حقوق العامل في القطاع الخاص؟", "answer": "إجابة القطاع الخاص..."}],
            "قضايا منتسبي القوات الامنية": [{"question": "ما هي حقوق منتسبي القوات الأمنية؟", "answer": "إجابة القوات الأمنية..."}]
        },
        "جنائي": {
            "جرائم": [{"question": "ما هي أنواع الجرائم الجنائية في العراق؟", "answer": "إجابة الجرائم..."}]
        }
    }

FREE_QUESTIONS_LIMIT = 3
QUESTION_PRICE = 5000
SUBSCRIPTION_PRICE = 50000
SUBSCRIPTION_DAYS = 30

PAY_MSG = (
    "للاشتراك الشهري (أسئلة غير محدودة : 30 يوم)\n"
    f"المبلغ: {SUBSCRIPTION_PRICE:,} دينار\n"
    "يتم التحويل حالياً عبر تطبيق (كي) المدعوم من قبل مصرف الرافدين وسيتم تفعيل طرق أخرى قريباً.\n"
    "عند استعدادك للتحويل اضغط (قبول الاشتراك) أو اضغط (إلغاء) أو (القائمة الرئيسية)."
)
SINGLE_PAY_MSG = (
    f"سعر الإجابة على كل سؤال: {QUESTION_PRICE:,} دينار.\n"
    f"يرجى التحويل إلى رقم الحساب: {PAY_ACCOUNT if PAY_ACCOUNT else '[لم يتم ضبط الحساب بعد]'}\n"
    "بعد التحويل اضغط زر (تم التحويل)\n"
    "قريبًا سيتم تفعيل الدفع عبر وسائل دفع اخرى لتسريع العملية."
)
SUPPORT_EMAIL = "mohamycom@proton.me"
SUPPORT_CHANNEL = "t.me/mohamycom_tips"
SUPPORT_USERNAME = ADMIN_USERNAME

ABOUT_MSG = (
    "مرحبًا بك في المنصة القانونية الذكية من محاميكم  ⚖️\n\n"
    "🧠 توفرهذه المنصة استشارات قانونية تلقائية بشكل سريع، دقيق، وبأعلى درجات الخصوصية.\n\n"
    "💰 تكلفة كل استشارة هي مبلغ رمزي قدره 5,000 دينار عراقي فقط، ويُستخدم بالكامل لأغراض تطوير المنصة، وليس لتحقيق ألارباح.\n"
    "📅 كما يمكنك الاشتراك شهريًا مقابل 50,000 دينار عراقي، لتطرح عددًا غير محدود من الأسئلة دون أي رسوم إضافية.\n\n"
    "📬 للدعم أو الاستفسار:\n"
    "- البريد الإلكتروني: mohamycom@proton.me\n"
    "- قناة تيليجرام للتواصل السريع: t.me/mohamycom_tips\n\n"
    "🔻 إخلاء مسؤولية:\n"
    "جميع الإجابات المقدّمة عبر المنصة هي استشارات عامة، مبنية على المعلومات التي تزوّدنا بها، ولا تُعدّ بديلاً عن الاستشارة القانونية المباشرة مع محامٍ مختص. لا تتحمل المنصة أو فريق محاميكم أي مسؤولية قانونية ناتجة عن استخدام هذه المعلومات في الدعاوى أو الإجراءات الرسمية."
)

WELCOME_MSG = (
    "👋 مرحبًا بك في المنصة القانونية الذكية، إحدى خدمات منصة محاميكم ⚖️\n\n"
    "هنا يمكنك الحصول على إجابات قانونية فورية ودقيقة لمساعدتك في فهم وضعك القانوني واتخاذ قراراتك بثقة واطمئنان.\n\n"
    "🔒 نضمن لك أقصى درجات الخصوصية – لا نطلب أي معلومات شخصية، ويتم حذف جميع المحادثات تلقائيًا بعد انتهاء الجلسة.\n\n"
    "💼 ملاحظة: يمكنك الاشتراك شهريًا للاستفادة من عدد غير محدود من الإجابات الفورية دون الحاجة للدفع عن كل سؤال.\n\n"
    "👇 للبدء، اختر القسم المناسب من القائمة:"
)